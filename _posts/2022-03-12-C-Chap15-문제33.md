---
published: true
title: "2022-03-12-C-Chap15-문제33"
categories:
  - C
tags:
  - C
toc: true
toc_sticky: true
toc_label: "C"
---

# 자동차 관리 프로젝트 2

여러 자동차의 정보를 입력 받고 이 리스트를 출력 및 수정할 수 있는, 자동차 관리 프로그램 내지 플랫폼을 개발하고자 한다! 다음 조건에 맞추어 결과화면과 같이 출력이 되도록 프로그램을 작성하십시오.

> **조건**

- 이전에 만들었던 자동차 관리 프로그램을 바탕으로 한다.
- 파일 입출력을 통해 프로그램을 처음 실행시키면(메뉴가 뜨기 전에) 임의의 파일 정보(cars.txt)를 읽기 모드(r)로 불러온다.
- 불러온 정보는 자동차 정보 구조체에 행 순으로 배열에 저장한다. (feop() 함수 사용) 그 다음, 파일 스트림을 종료한다.
- '신규입력'을 선택 시에는 위의 파일 정보(cars.txt)를 추가 보드(a)로 불러온 다음, 정보 번호(No.), 모델명, 제조사, 가격, 연비, 출시일을 각각 띄어쓰기로 구분하여, 텍스트 파일에 작성하게끔 한다.
- 수정 시에는 파일 입출력을 하지 않는다.
- 단, 모든 파일 스트림에서 파일을 열 수 없을 시, 파일을 열 수가 없다는 내용의 에러 처리가 되어야 한다.(fprintf() 함수에 stderr 처리)

![image](https://github.com/222SeungHyun/222SeungHyun.github.io/blob/master/_images/%EA%B8%B0%EC%B4%88%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%2013%EC%9E%A5%20%EC%8B%A4%EC%8A%B5-%EB%AC%B8%EC%A0%9C32-3.png?raw=true)

> **Source**

```C++
#include<stdio.h>

#define STRING_SIZE 30
#define SIZE 10

struct datetype {
	int year;
	int month;
};

struct car {
	struct datetype release;

	char model[STRING_SIZE];
	char maker[STRING_SIZE];
	int value;
	double mileage;
};

typedef struct car CAR;

int main(void) {
	CAR cars[SIZE];

	int index = 0;
	int input1 = 0;
	int input2 = 0;
	int input3 = 0;
	int input_value1 = 0;
	int input_value2 = 0;
	double input_mileage = 0;
	int input_release_year = 0;

	printf("[자동차 관리 프로그램]\n\n");

	while (1) {
		printf("[메뉴]\n");
		printf("1) 신규입력\t2) 리스트\t3) 종료\n");
		printf("선택 > ");
		scanf("%d", &input1);

		if (input1 == 1) {
			printf("[신규입력]\n\n");
			printf("모델명 > ");
			scanf("%s", cars[index].model);
			printf("제조사 > ");
			scanf("%s", cars[index].maker);
			printf("가격(만원) > ");
			scanf("%d", &cars[index].value);
			printf("연비 > ");
			scanf("%lf", &cars[index].mileage);
			printf("출시일 > ");
			scanf("%d %d", &cars[index].release.year, &cars[index].release.month);
			index++;
		}
		else if (input1 == 2) {
			printf("[리스트]\n");
			printf("======================================================\n");
			for (int i = 0; i < index; i++) {
				printf("No.%d\t모델명: %s\t제조사: %s\t가격: %d\t연비: %lf (km/l)\t출시일: %d년 %d월\n"
					, i, cars[i].model, cars[i].maker, cars[i].value, cars[i].mileage, cars[i].release.year, cars[i].release.month);
			}
			printf("======================================================\n");

			printf("1) 정보수정\t2) 조건검색\t3) 메뉴\n\n");
			printf("선택 > ");
			scanf("%d", &input2);

			if (input2 == 1) {
				printf("\n[정보수정]\n");
				printf("수정할 자동차 정보 번호(No.) > ");
				scanf("%d", &input3);
				printf("\n모델명: %s -> ", cars[input3].model);
				scanf("%s", cars[input3].model);
				printf("\n제조사: %s -> ", cars[input3].maker);
				scanf("%s", cars[input3].maker);
				printf("\n가격(만원): %d -> ", cars[input3].value);
				scanf("%d", &cars[input3].value);
				printf("\n연비: %lf -> ", cars[input3].mileage);
				scanf("%lf", &cars[input3].mileage);
				printf("\n출시일(yyyy mm): %d %d -> ", cars[input3].release.year, cars[input3].release.month);
				scanf("%d %d", &cars[input3].release.year, &cars[input3].release.month);
			}
			else if (input2 == 2) {
				printf("\n[조건검색]\n");
				printf("가격대(MIN MAX) > ");
				scanf("%d %d", &input_value1, &input_value2);
				printf("연비(MAX) > ");
				scanf("%lf", &input_mileage);
				printf("출시년도(yyyy) > ");
				scanf("%d", &input_release_year);

				printf("======================================================\n");
				for (int i = 0; i < index; i++) {
					if (input_value1 <= cars[i].value && cars[i].value < input_value2) {
						if (cars[i].mileage <= input_mileage) {
							if (input_release_year == cars[i].release.year) {
								printf("No.%d\t모델명: %s\t제조사: %s\t가격: %d\t연비: %lf (km/l)\t출시일: %d년 %d월\n"
									, i, cars[i].model, cars[i].maker, cars[i].value, cars[i].mileage, cars[i].release.year, cars[i].release.month);
							}
						}
					}
				}
				printf("======================================================\n");
			}
		}
		else if (input1 == 3) {
			index = 0;
			break;
		}
	}

	return 0;
}
```
